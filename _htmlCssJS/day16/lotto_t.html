<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button type="button" id="makeRandom">랜덤번호 6자리 생성</button>
    <h1 id="printNum">로또번호 출력</h1>
    <button type="button" id="makeRandom2">당첨번호 7자리 생성</button>
    <h1 id="printNum2">당첨번호 출력</h1>
    <button type="button" onclick="ranking()">결과 확인</button>
    <h1 id="printResult">당첨여부 출력</h1>

    <script>
        //set은 index가 없기 때문에 '마지막' 당첨 번호인 보너스번호를 찍을 수 없음
        //set , array 둘 다 사용
        const lottoArr=[]; //user 번호
        const lottoSet = new Set();
        const rNumarr=[]; //당첨번호
        const rNumSet = new Set();
        let bonus = 0; //보너스 번호 변수
    
        //사용자번호 6자리
        document.getElementById('makeRandom').addEventListener('click', ()=>{
            //set, map은 clear()로 비우기 가능
            //array -> splice(index, count) : index부터 count까지 제거 가능
            lottoArr.splice(0,6); //기존 배열값 버리기
            lottoSet.clear();
            randomNum(lottoSet, lottoArr, 6); //랜덤값 채우기
            console.log(lottoSet);
            console.log(lottoArr);
            document.getElementById('printNum').innerText = lottoArr;
        })

        //당첨번호+보너스번호 7자리 
        document.getElementById('makeRandom2').addEventListener('click', ()=>{
            rNumarr.splice(0,7);
            rNumSet.clear();
            randomNum(rNumSet, rNumarr, 7);
            console.log(rNumSet);
            console.log(rNumarr);
            //보너스번호 빼기
            bonus = rNumarr.pop(); //마지막 요소 제거 후 리턴 => arr에는 마지막요소 빠지고 나머지만 남으니까 
            //arr + bonus 번호로 출력하면 모든 번호가 출력되는 것이 됨
            document.getElementById('printNum2').innerText = rNumarr + ", [" + bonus + "]";
        })

        function ranking(){
            let cnt = 0; //일치 개수
            for(const a of lottoArr){
                for(const b of rNumarr){ //보너스번호가 빠진 6개 상태
                    if(a==b){
                        cnt++;
                    }
                }
            }
            
            console.log(cnt);

            let print = '';
            switch(cnt){
                case 6: print="축! 1등 당첨"; break;
                case 5: 
                    //lottoArr에 보너스값이 있는지 체크
                    //includes() : 하나의 문자열이 다른 문자열에 있는지 확인하는 메서드 true / false 로 리턴
                    lottoArr.includes(bonus) ? 
                    print = "축! 2등 당첨" : "축! 3등 당첨"; break;
                case 4: print="축! 4등 당첨"; break;
                case 3: print="축! 5등 당첨"; break;
                default: print="꽝!"; break
            }
            document.getElementById('printResult').innerText = print;
           
        }

        function randomNum(lottoSet, arr, num){
            while(lottoSet.size < num){
                let rNum = Math.floor(Math.random()*10)+1;
                lottoSet.add(rNum);
            }
                for(let num of lottoSet){
                    arr.push(num);
                }
        }


    </script>
</body>
</html>